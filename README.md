# Clef

> iPad ì „ìš© ì•…ë³´ ë·°ì–´ â€” Apple-native í•„ê¸° ë„êµ¬ì™€ on-device AI ìŒí‘œ ì¸ì‹

[![Platform](https://img.shields.io/badge/platform-iPadOS%2018+-blue)](https://developer.apple.com/ipados/)
[![Swift](https://img.shields.io/badge/Swift-6.0-orange)](https://swift.org)
[![License](https://img.shields.io/badge/license-Apache%202.0-green)](LICENSE)

---

## ì™œ Clefì¸ê°€

ê¸°ì¡´ ì•…ë³´ ì•±(forScore, Newzik, Piascore ë“±)ì€ ëª¨ë‘ **ìì²´ í•„ê¸° ì—”ì§„**ì„ ì‚¬ìš©í•œë‹¤. Apple Pencil Pro ì œìŠ¤ì²˜ë¥¼ ì§€ì›í•˜ëŠ” ì•…ë³´ ì•±ì€ **ë‹¨ í•˜ë‚˜ë„ ì—†ë‹¤.** AIë¡œ ì•…ë³´ë¥¼ ë¶„ì„í•˜ëŠ” ì•±ë„ Newzik LiveScore í•˜ë‚˜ë¿ì´ë©°, ì´ë§ˆì €ë„ í´ë¼ìš°ë“œ ê¸°ë°˜ì´ë¼ ì˜¤í”„ë¼ì¸ ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.

ClefëŠ” ì´ ì„¸ ê°€ì§€ ê³µë°±ì„ ë™ì‹œì— ì±„ìš´ë‹¤:

| ê¸°ì¡´ ì•±ì˜ í•œê³„ | Clefì˜ ì ‘ê·¼ |
|---|---|
| ìì²´ í•„ê¸° ì—”ì§„ â†’ íˆ¬ë°•í•œ í•„ê¸°ê° | **PencilKit** â€” Apple ë©”ëª¨ ì•±ê³¼ ë™ì¼í•œ í•„ê¸° ë„êµ¬ |
| Apple Pencil Pro ë¯¸ì§€ì› | **Squeeze, Barrel Roll, Haptic Feedback** ì™„ì „ ì§€ì› |
| AI ë¯¸ì§€ì› or í´ë¼ìš°ë“œ ì˜ì¡´ | **On-device Core ML** â€” ì˜¤í”„ë¼ì¸ OMR |

---

## í•µì‹¬ ê¸°ëŠ¥

### 1. Apple-Native í•„ê¸° ë„êµ¬

PencilKit ê¸°ë°˜ìœ¼ë¡œ Apple ë©”ëª¨ ì•±ê³¼ **ë™ì¼í•œ í•„ê¸° ê²½í—˜**ì„ ì œê³µí•œë‹¤.

**ê¸°ë³¸ í•„ê¸° ë„êµ¬** (PKToolPicker):
- íœ (`.pen`) â€” ê· ì¼í•œ ë‘ê»˜ì˜ ì‰í¬
- ì—°í•„ (`.pencil`) â€” ì••ë ¥ ê°ì§€, í…ìŠ¤ì²˜ í‘œí˜„
- ë§ˆì»¤ (`.marker`) â€” ë°˜íˆ¬ëª…, Barrel Roll ì§€ì›
- ë§Œë…„í•„ (`.fountainPen`) â€” ìº˜ë¦¬ê·¸ë˜í”¼, Barrel Roll ì§€ì›
- ëª¨ë…¸ë¼ì¸ (`.monoline`) â€” ì••ë ¥ ë¬´ê´€ ê· ì¼ ë‘ê»˜
- ì§€ìš°ê°œ (`.bitmap`, `.vector`) â€” í”½ì…€/ìŠ¤íŠ¸ë¡œí¬ ë‹¨ìœ„ ì‚­ì œ
- ì˜¬ê°€ë¯¸ (`.lasso`) â€” í•„ê¸° ì„ íƒ ë° ì´ë™
- ëˆˆê¸ˆì (`.ruler`) â€” ì§ì„  ê°€ì´ë“œ

**ì»¤ìŠ¤í…€ ì•…ë³´ ë„êµ¬** (PKToolPickerCustomItem, iOS 18+):
- ì•…ìƒ ê¸°í˜¸ íŒ”ë ˆíŠ¸ (f, p, ff, pp, sfz, crescendo, decrescendo ë“±)
- ì•„í‹°í˜ë ˆì´ì…˜ (ìŠ¤íƒ€ì¹´í† , í…Œëˆ„í† , ì•…ì„¼íŠ¸, í˜ë¥´ë§ˆíƒ€ ë“±)
- ìŒí‘œ/ì‰¼í‘œ ìŠ¤íƒ¬í”„ (ì˜¨ìŒí‘œ~64ë¶„ìŒí‘œ, ì ìŒí‘œ)
- ì—°ì£¼ ê¸°í˜¸ (íŠ¸ë¦´, í„´, ëª¨ë¥´ë´íŠ¸, ê¸€ë¦¬ì‚°ë„ ë“±)
- ë°˜ë³µ/êµ¬ì¡° ê¸°í˜¸ (ë¦¬í—ˆì„¤ ë§ˆí¬, ì½”ë‹¤, ì„¸ë‡¨ ë“±)

### 2. Apple Pencil Pro ì™„ì „ ì§€ì›

| ì œìŠ¤ì²˜ | ë™ì‘ | API |
|---|---|---|
| **Squeeze** | ì•…ìƒ ê¸°í˜¸ íŒ”ë ˆíŠ¸ í˜¸ì¶œ | `UIPencilInteraction.Squeeze` |
| **Barrel Roll** | ë§ˆì»¤/ë§Œë…„í•„ ê°ë„ ì¡°ì ˆ | `UITouch.rollAngle` |
| **Haptic Feedback** | ìŠ¤ëƒ…/ì •ë ¬ ì‹œ ì§„ë™ í”¼ë“œë°± | `UICanvasFeedbackGenerator` |
| **Hover** | í•„ê¸° ì „ ë¯¸ë¦¬ë³´ê¸° | `UIHoverGestureRecognizer` |
| **Double Tap** | ë„êµ¬ ì „í™˜ (ì‚¬ìš©ì ì„¤ì • ì¡´ì¤‘) | `UIPencilInteraction.preferredTapAction` |

**Squeeze â†’ í†µí•© íŒ”ë ˆíŠ¸ íë¦„:**
1. Apple Pencil Proë¥¼ ì¥ì–´ ì§œë©´ (`squeeze.phase == .ended`)
2. íœìŠ¬ hover ìœ„ì¹˜ì— **í†µí•© ì»¨í…ìŠ¤íŠ¸ íŒ”ë ˆíŠ¸** í‘œì‹œ (`squeeze.hoverPose?.location`)
3. íŒ”ë ˆíŠ¸ ìƒë‹¨ ì„¸ê·¸ë¨¼íŠ¸ íƒ­: `[ì•…ìƒ ê¸°í˜¸ | í•„ê¸° ë„êµ¬]`
   - **ì•…ìƒ ê¸°í˜¸ íƒ­**: ë‹¤ì´ë‚˜ë¯¹, ì•„í‹°í˜ë ˆì´ì…˜, ìŒí‘œ/ì‰¼í‘œ ìŠ¤íƒ¬í”„ ë“±
   - **í•„ê¸° ë„êµ¬ íƒ­**: íœ/ì—°í•„/ë§ˆì»¤ ì¢…ë¥˜, ìƒ‰ìƒ, ë‘ê»˜ ë¹ ë¥¸ ì „í™˜
4. ê¸°ë³¸ íƒ­ì€ ì‚¬ìš©ì ì„¤ì •ì—ì„œ ë³€ê²½ ê°€ëŠ¥ (ì„¤ì • > íŒ”ë ˆíŠ¸ > ê¸°ë³¸ íƒ­)
5. ë§ˆì§€ë§‰ ì‚¬ìš© íƒ­ì„ ê¸°ì–µí•˜ëŠ” ì˜µì…˜ë„ ì œê³µ
6. ì‚¬ìš©ì ì‹œìŠ¤í…œ ì„¤ì •ì´ `showContextualPalette`ì¼ ë•Œë§Œ ì‘ë™ (ì‹œìŠ¤í…œ ì„¤ì • ì¡´ì¤‘)

### 3. On-Device AI ìŒí‘œ ì¸ì‹

ìŠ¤ìº”ëœ PDF ì•…ë³´ì—ì„œ **ìŒì•… ê¸°í˜¸ë¥¼ ìë™ìœ¼ë¡œ ê°ì§€**í•œë‹¤. ëª¨ë“  ì²˜ë¦¬ëŠ” ë””ë°”ì´ìŠ¤ì—ì„œ ìˆ˜í–‰ë˜ì–´ **ì˜¤í”„ë¼ì¸ì—ì„œë„ ë™ì‘**í•œë‹¤.

**ê¸°ìˆ  ìŠ¤íƒ:**
- **ëª¨ë¸**: YOLOv8 â†’ Core ML ë³€í™˜
- **ì¶”ë¡ **: Vision Framework (`VNCoreMLRequest`)
- **í•™ìŠµ ë°ì´í„°**: ì‚¬ì „ í›ˆë ¨ëœ OMR ëª¨ë¸ (7,000+ ì´ë¯¸ì§€, 500K+ ë°”ìš´ë”© ë°•ìŠ¤)

**ê°ì§€ ê°€ëŠ¥í•œ ê¸°í˜¸:**
- ìŒí‘œ (ì˜¨ìŒí‘œ ~ 64ë¶„ìŒí‘œ, ì ìŒí‘œ, ë¬¶ìŒ)
- ì‰¼í‘œ (ì˜¨ì‰¼í‘œ ~ 64ë¶„ì‰¼í‘œ)
- ìŒìë¦¬í‘œ (ë†’ì€ìŒìë¦¬í‘œ, ë‚®ì€ìŒìë¦¬í‘œ, ê°€ì˜¨ìŒìë¦¬í‘œ)
- ì¡°í‘œ, ë°•ìí‘œ
- ì•„í‹°í˜ë ˆì´ì…˜, ë‹¤ì´ë‚˜ë¯¹ ê¸°í˜¸
- ì´ìŒì¤„, ë¶™ì„ì¤„, ì…‹ì‡ë‹¨ìŒí‘œ ë“±

**ì‚¬ìš©ì ì›Œí¬í”Œë¡œìš°:**
1. PDF ì•…ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤
2. "ë¶„ì„" ë²„íŠ¼ìœ¼ë¡œ OMR ì‹¤í–‰ â†’ ê¸°í˜¸ë³„ ë°”ìš´ë”© ë°•ìŠ¤ ìƒì„±
3. ê°ì§€ëœ ê¸°í˜¸ë¥¼ íƒ­í•˜ì—¬ ì‚­ì œ/ìˆ˜ì •/ì´ë™
4. íŒ”ë ˆíŠ¸ì—ì„œ ìƒˆ ê¸°í˜¸ë¥¼ ë“œë˜ê·¸í•˜ì—¬ ì¶”ê°€
5. ìˆ˜ì • ì‚¬í•­ì€ ì˜¤ë²„ë ˆì´ ë ˆì´ì–´ë¡œ ì €ì¥ (ì›ë³¸ PDF ë³´ì¡´)

### 4. PDF ì•…ë³´ ê´€ë¦¬

**ë·°ì–´:**
- PDFKit ê¸°ë°˜ ê³ ì„±ëŠ¥ ë Œë”ë§
- í˜ì´ì§€ë³„ PencilKit ì˜¤ë²„ë ˆì´ (íˆ¬ëª… PKCanvasView)
- ì—°ì† ìŠ¤í¬ë¡¤ / í˜ì´ì§€ ë„˜ê¸°ê¸° ëª¨ë“œ
- ì–‘ë©´ ë³´ê¸° (ëœë“œìŠ¤ì¼€ì´í”„)
- AirTurn ë“± ë¸”ë£¨íˆ¬ìŠ¤ í˜ë‹¬ í˜ì´ì§€ ë„˜ê¸°ê¸°

**ë¼ì´ë¸ŒëŸ¬ë¦¬:**
- í´ë”/íƒœê·¸ ê¸°ë°˜ ì •ë¦¬
- Spotlight ê²€ìƒ‰ ì—°ë™
- ë©”íƒ€ë°ì´í„° (ì‘ê³¡ê°€, ì¡°ì„±, ë°•ì, ì•…ê¸° ë“±)
- iCloud Drive ë™ê¸°í™”

---

## ì•„í‚¤í…ì²˜

### ê¸°ìˆ  ìŠ¤íƒ

| ë ˆì´ì–´ | ê¸°ìˆ  | ë¹„ê³  |
|---|---|---|
| **UI** | SwiftUI + UIKit ë¸Œë¦¿ì§€ | PencilKitì€ UIKit ê¸°ë°˜, SwiftUIë¡œ ë˜í•‘ |
| **PDF ë Œë”ë§** | PDFKit (`PDFView`) | ë„¤ì´í‹°ë¸Œ PDF ë Œë”ë§ |
| **í•„ê¸°** | PencilKit (`PKCanvasView`) | PDF í˜ì´ì§€ë³„ ì˜¤ë²„ë ˆì´ |
| **ë„êµ¬** | PencilKit (`PKToolPicker`) | ì»¤ìŠ¤í…€ ì•„ì´í…œ í¬í•¨ |
| **AI/ML** | Core ML + Vision | YOLOv8 ê¸°ë°˜ OMR ëª¨ë¸ |
| **ë°ì´í„°** | SwiftData | ì•…ë³´ ë©”íƒ€ë°ì´í„°, ì„¤ì • |
| **í•„ê¸° ì €ì¥** | PKDrawing (Codable) | í˜ì´ì§€ë³„ ì§ë ¬í™” |
| **ë™ê¸°í™”** | CloudKit (iCloud) | ì•…ë³´ + í•„ê¸° ë™ê¸°í™” |

### ë ˆì´ì–´ êµ¬ì„±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Clef App                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Presentation Layer (SwiftUI)               â”‚
â”‚  â”œâ”€â”€ ScoreLibraryView     (ì•…ë³´ ëª©ë¡)        â”‚
â”‚  â”œâ”€â”€ ScoreReaderView      (ì•…ë³´ ë·°ì–´)        â”‚
â”‚  â”‚   â”œâ”€â”€ PDFPageView      (PDF ë Œë”ë§)       â”‚
â”‚  â”‚   â”œâ”€â”€ CanvasOverlay    (PencilKit í•„ê¸°)   â”‚
â”‚  â”‚   â””â”€â”€ SymbolPalette    (ì•…ìƒ ê¸°í˜¸ íŒ”ë ˆíŠ¸)  â”‚
â”‚  â””â”€â”€ SettingsView         (ì„¤ì •)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Domain Layer                                â”‚
â”‚  â”œâ”€â”€ ScoreManager         (ì•…ë³´ CRUD)        â”‚
â”‚  â”œâ”€â”€ AnnotationManager    (í•„ê¸° ê´€ë¦¬)         â”‚
â”‚  â”œâ”€â”€ OMREngine            (ìŒí‘œ ì¸ì‹)         â”‚
â”‚  â””â”€â”€ SymbolLibrary        (ì•…ìƒ ê¸°í˜¸ DB)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Infrastructure Layer                        â”‚
â”‚  â”œâ”€â”€ PDFService           (PDFKit ë˜í¼)      â”‚
â”‚  â”œâ”€â”€ MLService            (Core ML ë˜í¼)     â”‚
â”‚  â”œâ”€â”€ StorageService       (SwiftData)        â”‚
â”‚  â””â”€â”€ CloudService         (CloudKit)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### PDF + PencilKit ì˜¤ë²„ë ˆì´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       ScoreReaderView           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚        PDFView            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚     PDF Page 1      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ PKCanvasView  â”‚  â”‚  â”‚  â”‚  â† íˆ¬ëª… ì˜¤ë²„ë ˆì´ (í•„ê¸°)
â”‚  â”‚  â”‚  â”‚   (overlay)   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚     PDF Page 2      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ PKCanvasView  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   (overlay)   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      PKToolPicker         â”‚  â”‚  â† í•˜ë‹¨ ë„êµ¬ ë§‰ëŒ€
â”‚  â”‚  [íœ][ì—°í•„][ë§ˆì»¤]...       â”‚  â”‚
â”‚  â”‚  [â™© ìŒí‘œ][ğ†‘ ê¸°í˜¸]        â”‚  â”‚  â† ì»¤ìŠ¤í…€ ì•…ë³´ ë„êµ¬
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### OMR íŒŒì´í”„ë¼ì¸

```
PDF Page Image
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Preprocessing â”‚  â†’ ì´ì§„í™”, ë…¸ì´ì¦ˆ ì œê±°, ê¸°ìš¸ê¸° ë³´ì •
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  YOLOv8 Model â”‚  â†’ Core ML ì¶”ë¡  (VNCoreMLRequest)
â”‚  (on-device)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Post-process â”‚  â†’ NMS, ë°”ìš´ë”© ë°•ìŠ¤ â†’ ê¸°í˜¸ ë¶„ë¥˜
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Symbol Layer  â”‚  â†’ í¸ì§‘ ê°€ëŠ¥í•œ ê¸°í˜¸ ì˜¤ë²„ë ˆì´
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ë°ì´í„° ëª¨ë¸

### Score (ì•…ë³´)

```swift
@Model
class Score {
    var id: UUID
    var title: String
    var composer: String?
    var instrument: String?
    var key: String?            // ì¡°ì„± (ì˜ˆ: "C Major")
    var timeSignature: String?  // ë°•ì (ì˜ˆ: "4/4")
    var tags: [String]
    var pdfData: Data           // PDF ì›ë³¸
    var pageAnnotations: [PageAnnotation]  // í˜ì´ì§€ë³„ í•„ê¸°
    var createdAt: Date
    var updatedAt: Date
}
```

### PageAnnotation (í˜ì´ì§€ í•„ê¸°)

```swift
@Model
class PageAnnotation {
    var pageIndex: Int
    var drawingData: Data       // PKDrawing ì§ë ¬í™”
    var symbolOverlays: [SymbolOverlay]  // OMR ê°ì§€/ì‚¬ìš©ì ì¶”ê°€ ê¸°í˜¸
}
```

### SymbolOverlay (ì•…ë³´ ê¸°í˜¸ ì˜¤ë²„ë ˆì´)

```swift
struct SymbolOverlay: Codable {
    var id: UUID
    var type: MusicSymbolType   // ìŒí‘œ, ì‰¼í‘œ, ë‹¤ì´ë‚˜ë¯¹ ë“±
    var boundingBox: CGRect     // ìœ„ì¹˜ ë° í¬ê¸°
    var isDetected: Bool        // OMR ê°ì§€ vs ì‚¬ìš©ì ì¶”ê°€
    var isDeleted: Bool         // ì†Œí”„íŠ¸ ì‚­ì œ (ì›ë³¸ ë³´ì¡´)
}
```

### MusicSymbolType (ì•…ë³´ ê¸°í˜¸ ë¶„ë¥˜)

```swift
enum MusicSymbolType: String, Codable {
    // ìŒí‘œ
    case wholeNote, halfNote, quarterNote, eighthNote, sixteenthNote
    case dottedHalfNote, dottedQuarterNote, dottedEighthNote
    
    // ì‰¼í‘œ
    case wholeRest, halfRest, quarterRest, eighthRest, sixteenthRest
    
    // ìŒìë¦¬í‘œ
    case trebleClef, bassClef, altoClef
    
    // ë‹¤ì´ë‚˜ë¯¹
    case pianissimo, piano, mezzoPiano, mezzoForte, forte, fortissimo
    case sforzando, crescendo, decrescendo
    
    // ì•„í‹°í˜ë ˆì´ì…˜
    case staccato, tenuto, accent, fermata, marcato
    
    // ì¥ì‹ìŒ
    case trill, turn, mordent, glissando
    
    // êµ¬ì¡°
    case coda, segno, rehearsalMark
    case repeatStart, repeatEnd
}
```

---

## ë¡œë“œë§µ

### Phase 1 â€” ê¸°ë³¸ ë·°ì–´ (MVP)

- [ ] Xcode í”„ë¡œì íŠ¸ ì„¤ì • (iPadOS 18+, Swift 6)
- [ ] PDF ê°€ì ¸ì˜¤ê¸° ë° ë Œë”ë§ (PDFKit)
- [ ] í˜ì´ì§€ë³„ PencilKit ì˜¤ë²„ë ˆì´
- [ ] PKToolPicker ê¸°ë³¸ ë„êµ¬ ì—°ë™
- [ ] í•„ê¸° ë°ì´í„° ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸° (SwiftData)
- [ ] ê¸°ë³¸ ì•…ë³´ ë¼ì´ë¸ŒëŸ¬ë¦¬ (ëª©ë¡, í´ë”)

### Phase 2 â€” Apple Pencil Pro & ì»¤ìŠ¤í…€ ë„êµ¬

- [ ] Apple Pencil Pro Squeeze â†’ ì»¨í…ìŠ¤íŠ¸ íŒ”ë ˆíŠ¸
- [ ] Barrel Roll ì§€ì› (ë§ˆì»¤, ë§Œë…„í•„)
- [ ] Haptic Feedback (ìŠ¤ëƒ…, ì •ë ¬)
- [ ] PKToolPickerCustomItem â€” ì•…ìƒ ê¸°í˜¸ ë„êµ¬
- [ ] ê¸°í˜¸ ë“œë˜ê·¸ & ë“œë¡­ ë°°ì¹˜
- [ ] SMuFL í°íŠ¸ ê¸°ë°˜ ê¸°í˜¸ ë Œë”ë§

### Phase 3 â€” On-Device AI (OMR)

- [ ] YOLOv8 OMR ëª¨ë¸ í•™ìŠµ ë° Core ML ë³€í™˜
- [ ] Vision Framework ì¶”ë¡  íŒŒì´í”„ë¼ì¸
- [ ] ê°ì§€ ê²°ê³¼ â†’ SymbolOverlay ë§¤í•‘
- [ ] ê¸°í˜¸ ì„ íƒ/ì‚­ì œ/ì´ë™ UI
- [ ] ê¸°í˜¸ ì¶”ê°€ (íŒ”ë ˆíŠ¸ â†’ ë“œë˜ê·¸)
- [ ] ì „ì²˜ë¦¬ ìµœì í™” (Metal Performance Shaders)

### Phase 4 â€” ì™„ì„±ë„

- [ ] iCloud ë™ê¸°í™” (CloudKit)
- [ ] Spotlight ê²€ìƒ‰ ì—°ë™
- [ ] ë¸”ë£¨íˆ¬ìŠ¤ í˜ë‹¬ í˜ì´ì§€ ë„˜ê¸°ê¸°
- [ ] ë‹¤í¬ ëª¨ë“œ / ì„¸í”¼ì•„ ëª¨ë“œ
- [ ] ë°˜í˜ì´ì§€ ë„˜ê¸°ê¸°, ì–‘ë©´ ë³´ê¸°
- [ ] ë‚´ë³´ë‚´ê¸° (PDF with annotations, ì´ë¯¸ì§€)
- [ ] ì ‘ê·¼ì„± (VoiceOver, Dynamic Type)

---

## ìš”êµ¬ ì‚¬í•­

- iPadOS 18.0+
- Apple Pencil (1ì„¸ëŒ€ / 2ì„¸ëŒ€ / Pro)
- Xcode 16+
- Swift 6.0

## ë¼ì´ì„ ìŠ¤

[Apache License 2.0](LICENSE)
